{% extends "_base.html" %}

{% block title %}Log In{% endblock title %}

{% block content %}
    {% include "_secondary_nav.html" %}
    <div class="max-w-md mx-auto py-6 px-12 mt-6 bg-white rounded-2xl drop-shadow-sm">
        <div class="flex flex-col items-start justify-start w-full h-full p-10">
            <h4 class="w-full text-3xl font-bold text-stone-900 text-center leading-none">
                Log In
            </h4>
        </div>

        <form class="form" method="post" id="login_form" role="form" action="{% url 'account_login' %}">
            {% csrf_token %}

            {{ form.as_p }}

            <button type="submit"
                    class="py-3 text-lg text-white bg-primary-500 hover:bg-stone-900 rounded-full px-10 w-full transition-colors">
                Log In
            </button>
        </form>

        <p class="w-full mt-4 text-md text-center text-stone-500">
            <a href="/accounts/password/reset/" class="text-primary-500 underline">
                Reset Password
            </a>
        </p>

        <p class="w-full mt-4 text-md text-center text-stone-500">
            Want to create an account instead?
            <a href="{% url 'account_login' %}" class="text-primary-500 underline">
                Create Account
            </a>
        </p>
    </div>

    {% if form.errors %}
        <div class="absolute text-lg text-stone-900 bottom-3.5 left-3.5">
            <ul class="flex flex-col gap-y-1.5">
                {% for field, errors in form.errors.items %}
                    {% for error in errors %}
                        <li x-data="{ show: true }" x-show="show" x-on:click="show = false"
                            x-init="setTimeout(() => { show = false }, 3000)" x-transition:enter="transition ease-out duration-250"
                            x-transition:enter="transition ease-out duration-250" x-transition:enter-start="opacity-0"
                            x-transition:enter-end="opacity-100" x-transition:leave="transition ease-in duration-250"
                            x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0"
                            class="py-6 px-3.5 max-w-xl bg-red-300 rounded-xl drop-shadow-sm">
                            {{ error }}
                        </li>
                    {% endfor %}
                {% endfor %}
            </ul>
        </div>
    {% endif %}
{% endblock %}