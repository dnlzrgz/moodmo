{% extends "_base.html" %}

{% block title %}Moods{% endblock title %}

{% block content %}
    {% include "_primary_nav.html" %}

    {% regroup moods by timestamp.date as moods_by_day %}
    <div class="mt-32 mb-12 text-lg text-stone-900">
        {% for day, moods in moods_by_day %}
            <div class="max-w-lg mb-9 mx-auto">
                <p class="mb-3">
                    <time>
                        {{ day }}
                    </time>
                </p>
                <ol>
                    {% for mood in moods %}
                        {% include "moods/_mood_card.html" %}
                    {% endfor %}
                </ol>
            </div>

        {% empty %}
            <div class="mt-56 text-center">
                <h4 class="font-bold text-stone-900 text-5xl leading-none mb-4">
                    Ooops!
                </h4>
                <p class="text-xl max-w-xl mx-auto text-stone-900">
                    No moods yet? Must be a glitch in the emotional matrix. Letâ€™s debug together!
                </p>
            </div>
        {% endfor %}
    </div>

    {% if page_obj.has_next or page_obj.has_previous %}
        <div class="text-lg flex items-center justify-center gap-3.5 mx-auto mb-8">
            {% if page_obj.has_previous %}
                <a href="?page=1" class="hover:text-primary-500 transition-colors">&#171;</a>
                <a href="?page={{ page_obj.previous_page_number }}" class="hover:text-primary-500 transition-colors">Prev</a>
            {% else %}
                <span class="cursor-pointer p-1.5 text-stone-500 select-none">
                    &#171;
                </span>
                <span class="cursor-pointer p-1.5 text-stone-500 select-none">
                    Prev
                </span>
            {% endif %}

            <span class="mx-1.5 select-none">
                {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
            </span>

            {% if page_obj.has_next %}
                <a href="?page={{ page_obj.next_page_number }}" class="hover:text-primary-500 transition-colors">Next</a>
                <a href="?page={{ page_obj.paginator.num_pages }}" class="hover:text-primary-500 transition-colors">&#187;</a>
            {% else %}
                <span class="cursor-pointer p-1.5 text-stone-500 select-none">
                    Next
                </span>
                <span class=" cursor-pointer p-1.5 text-stone-500 select-none">
                    &#187;
                </span>
            {% endif %}
        </div>
    {% endif %}

    <script>
        const moodColors = {
            '-2': 'bg-red-500',
            '-1': 'bg-red-100',
            '0': 'bg-stone-50',
            '1': 'bg-primary-100',
            '2': 'bg-primary-500',
        };

        const getMoodColor = (mood) => {
            return moodColors[mood] || 'bg-stone-50'
        }
    </script>

{% endblock content %}