{% extends "_base.html" %}

{% block title %}Moods{% endblock title %}

{% block content %}
    {% include "_primary_nav.html" %}

    {% regroup moods by timestamp.date as moods_by_day %}
    <div class="mt-32 text-lg text-stone-900">
        {% for day, moods in moods_by_day %}
            <div class="max-w-lg mb-9 mx-auto">
                <p class="mb-3">
                    <time>
                        {{ day }}
                    </time>
                </p>
                <ol>
                    {% for mood in moods %}
                        {% include "moods/_mood_card.html" %}
                    {% endfor %}
                </ol>
            </div>

        {% empty %}
            <div class="mt-56 text-center">
                <h4 class="font-bold text-stone-900 text-5xl leading-none mb-4">
                    Ooooooooooooooooooooooooops!
                </h4>
                <p class="text-xl max-w-xl mx-auto text-stone-900">
                    No moods yet? Must be a glitch in the emotional matrix. Letâ€™s debug together!
                </p>
            </div>
        {% endfor %}
    </div>

    {% if moods %}
        <div class="flex items-center justify-center mx-auto">
            <span class="step-links">
                {% if page_obj.has_previous %}
                    <a href="?page=1">&laquo; first</a>
                    <a href="?page={{ page_obj.previous_page_number }}">previous</a>
                {% endif %}

                <span class="current">
                    Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
                </span>

                {% if page_obj.has_next %}
                    <a href="?page={{ page_obj.next_page_number }}">next</a>
                    <a href="?page={{ page_obj.paginator.num_pages }}">last &raquo;</a>
                {% endif %}
            </span>
        </div>
    {% endif %}

    <script>
        const moodColors = {
            '-2': 'bg-red-500',
            '-1': 'bg-red-100',
            '0': 'bg-stone-50',
            '1': 'bg-primary-100',
            '2': 'bg-primary-500',
        };

        const getMoodColor = (mood) => {
            return moodColors[mood] || 'bg-stone-50'
        }
    </script>

{% endblock content %}